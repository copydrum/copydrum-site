const n="315942796574-lj6bfde2nl36bnors1crjpne23ljmas4.apps.googleusercontent.com";class a{isInitialized=!1;auth2=null;async initialize(){if(!this.isInitialized)return new Promise((i,e)=>{if(window.gapi)window.gapi.load("auth2",()=>{this.initAuth2().then(i).catch(e)});else{const t=document.createElement("script");t.src="https://apis.google.com/js/api.js",t.onload=()=>{window.gapi.load("auth2",()=>{this.initAuth2().then(i).catch(e)})},t.onerror=()=>e(new Error("Google API 스크립트 로드 실패")),document.head.appendChild(t)}})}async initAuth2(){try{this.auth2=await window.gapi.auth2.init({client_id:n,scope:"profile email"}),this.isInitialized=!0}catch{throw new Error("Google Auth2 초기화 실패")}}async login(){await this.initialize();try{const e=await this.auth2.signIn();if(!e.isSignedIn())throw new Error("구글 로그인이 취소되었습니다.");const t=e.getBasicProfile();return{userInfo:{id:t.getId(),email:t.getEmail(),name:t.getName(),picture:t.getImageUrl(),given_name:t.getGivenName(),family_name:t.getFamilyName()}}}catch(i){throw i.error==="popup_closed_by_user"?new Error("로그인 창이 닫혔습니다."):new Error(i.message||"구글 로그인에 실패했습니다.")}}async logout(){this.auth2&&this.isLoggedIn()&&await this.auth2.signOut()}isLoggedIn(){return this.auth2&&this.auth2.isSignedIn.get()}getCurrentUser(){if(!this.isLoggedIn())return null;const e=this.auth2.currentUser.get().getBasicProfile();return{id:e.getId(),email:e.getEmail(),name:e.getName(),picture:e.getImageUrl(),given_name:e.getGivenName(),family_name:e.getFamilyName()}}}const s=new a;export{s as g};
//# sourceMappingURL=google-Bi8GeQwn.js.map
