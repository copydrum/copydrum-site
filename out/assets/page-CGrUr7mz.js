import{r as a,u as g,j as e,L as l}from"./index-C3--GnAp.js";import{s as u}from"./supabase-KAXpo3yM.js";import"./kakao-lIUS1Y1u.js";import"./authStore-Cz-qJVyn.js";const $=()=>{const[x,m]=a.useState(null),[b,h]=a.useState(!0),[t,i]=a.useState("profile"),[j,y]=a.useState(5e4),[r,n]=a.useState({full_name:"",phone:"",cash_balance:0}),[N,f]=a.useState(!1),[v,p]=a.useState({full_name:"",phone:""}),[w]=a.useState([{id:1,title:"Rock Ballad Collection",artist:"Various Artists",price:15e3,purchaseDate:"2024-01-15",downloadCount:3,maxDownloads:"무제한",status:"완료"},{id:2,title:"Jazz Fusion Beats",artist:"Modern Jazz Masters",price:18e3,purchaseDate:"2024-01-10",downloadCount:1,maxDownloads:"무제한",status:"완료"},{id:3,title:"Pop Hits 2024",artist:"Chart Toppers",price:12e3,purchaseDate:"2024-01-05",downloadCount:5,maxDownloads:"무제한",status:"완료"}]),[C]=a.useState([{id:1,type:"충전",amount:5e4,description:"카카오페이 충전",date:"2024-01-15 14:30",status:"완료"},{id:2,type:"사용",amount:-15e3,description:"Rock Ballad Collection 구매",date:"2024-01-15 15:00",status:"완료"},{id:3,type:"사용",amount:-18e3,description:"Jazz Fusion Beats 구매",date:"2024-01-10 16:20",status:"완료"},{id:4,type:"충전",amount:3e4,description:"신용카드 충전",date:"2024-01-08 10:15",status:"완료"}]);return a.useEffect(()=>{(async()=>{const{data:{user:d}}=await u.auth.getUser();if(m(d),d){const o={full_name:d.user_metadata?.name||"",phone:d.user_metadata?.phone||"",cash_balance:0};n(o),p({full_name:o.full_name,phone:o.phone})}h(!1)})();const{data:{subscription:c}}=u.auth.onAuthStateChange((d,o)=>{m(o?.user??null),h(!1)});return()=>c.unsubscribe()},[]),g(),e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("header",{className:"bg-white shadow-sm border-b border-gray-200",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex justify-between items-center h-16",children:[e.jsxs("div",{className:"flex items-center space-x-8",children:[e.jsx(l,{to:"/",className:"text-2xl font-bold text-blue-600",style:{fontFamily:'"Pacifico", serif'},children:"logo"}),e.jsxs("nav",{className:"hidden md:flex space-x-8",children:[e.jsx(l,{to:"/",className:"text-gray-700 hover:text-blue-600 transition-colors",children:"홈"}),e.jsx(l,{to:"/categories",className:"text-gray-700 hover:text-blue-600 transition-colors",children:"카테고리"}),e.jsx(l,{to:"/custom-order",className:"text-gray-700 hover:text-blue-600 transition-colors",children:"맞춤 제작"}),e.jsx(l,{to:"/customer-support",className:"text-gray-700 hover:text-blue-600 transition-colors",children:"고객지원"})]})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs(l,{to:"/cart",className:"relative p-2 text-gray-700 hover:text-blue-600 transition-colors",children:[e.jsx("i",{className:"ri-shopping-cart-line w-5 h-5"}),cartItemsCount>0&&e.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center",children:cartItemsCount})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("span",{className:"text-gray-700",children:"마이페이지"}),e.jsx("button",{onClick:handleLogout,className:"text-gray-700 hover:text-blue-600 transition-colors",children:"로그아웃"})]})]})]})})}),e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-8",children:[e.jsx("div",{className:"lg:col-span-1",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-6",children:[e.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center",children:e.jsx("i",{className:"ri-user-line text-blue-600 w-6 h-6"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"font-semibold text-gray-900",children:x?.email?.split("@")[0]||"사용자"}),e.jsx("p",{className:"text-sm text-gray-600",children:x?.email})]})]}),e.jsxs("nav",{className:"space-y-2",children:[e.jsxs("button",{onClick:()=>i("profile"),className:`w-full text-left px-4 py-3 rounded-lg transition-colors flex items-center space-x-3 ${t==="profile"?"bg-blue-50 text-blue-600":"text-gray-700 hover:bg-gray-50"}`,children:[e.jsx("i",{className:"ri-user-line w-5 h-5"}),e.jsx("span",{children:"프로필 관리"})]}),e.jsxs("button",{onClick:()=>i("orders"),className:`w-full text-left px-4 py-3 rounded-lg transition-colors flex items-center space-x-3 ${t==="orders"?"bg-blue-50 text-blue-600":"text-gray-700 hover:bg-gray-50"}`,children:[e.jsx("i",{className:"ri-file-list-line w-5 h-5"}),e.jsx("span",{children:"주문 내역"})]}),e.jsxs("button",{onClick:()=>i("downloads"),className:`w-full text-left px-4 py-3 rounded-lg transition-colors flex items-center space-x-3 ${t==="downloads"?"bg-blue-50 text-blue-600":"text-gray-700 hover:bg-gray-50"}`,children:[e.jsx("i",{className:"ri-download-line w-5 h-5"}),e.jsx("span",{children:"다운로드"})]}),e.jsxs("button",{onClick:()=>i("favorites"),className:`w-full text-left px-4 py-3 rounded-lg transition-colors flex items-center space-x-3 ${t==="favorites"?"bg-blue-50 text-blue-600":"text-gray-700 hover:bg-gray-50"}`,children:[e.jsx("i",{className:"ri-heart-line w-5 h-5"}),e.jsx("span",{children:"찜한 악보"})]}),e.jsxs("button",{onClick:()=>i("points"),className:`w-full text-left px-4 py-3 rounded-lg transition-colors flex items-center space-x-3 ${t==="points"?"bg-blue-50 text-blue-600":"text-gray-700 hover:bg-gray-50"}`,children:[e.jsx("i",{className:"ri-coin-line w-5 h-5"}),e.jsx("span",{children:"적립금"})]})]})]})}),e.jsxs("div",{className:"lg:col-span-3",children:[t==="profile"&&e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-6",children:"프로필 관리"}),e.jsxs("form",{onSubmit:updateProfile,className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"이메일"}),e.jsx("input",{type:"email",value:x?.email||"",disabled:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg bg-gray-50 text-gray-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"이름"}),e.jsx("input",{type:"text",value:r.name,onChange:s=>n({...r,name:s.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"이름을 입력하세요"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"전화번호"}),e.jsx("input",{type:"tel",value:r.phone,onChange:s=>n({...r,phone:s.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"전화번호를 입력하세요"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"생년월일"}),e.jsx("input",{type:"date",value:r.birth_date,onChange:s=>n({...r,birth_date:s.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"주소"}),e.jsx("input",{type:"text",value:r.address,onChange:s=>n({...r,address:s.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"주소를 입력하세요"})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{type:"submit",className:"bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-7 transition-colors whitespace-nowrap",children:"프로필 업데이트"})})]})]}),t==="orders"&&e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-6",children:"주문 내역"}),orders.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("i",{className:"ri-file-list-line text-gray-300 w-16 h-16 mx-auto mb-4"}),e.jsx("h4",{className:"text-lg font-medium text-gray-900 mb-2",children:"주문 내역이 없습니다"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"아직 구매한 악보가 없습니다."}),e.jsx(l,{to:"/categories",className:"bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition-colors inline-block whitespace-nowrap",children:"악보 둘러보기"})]}):e.jsx("div",{className:"space-y-4",children:orders.map(s=>e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex justify-between items-start mb-3",children:[e.jsxs("div",{children:[e.jsxs("h4",{className:"font-medium text-gray-900",children:["주문 #",s.id.slice(0,8)]}),e.jsx("p",{className:"text-sm text-gray-600",children:new Date(s.created_at).toLocaleDateString()})]}),e.jsx("span",{className:`px-3 py-1 text-sm font-medium rounded-full ${s.status==="completed"?"bg-green-100 text-green-800":s.status==="pending"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:s.status==="completed"?"완료":s.status==="pending"?"대기":"취소"})]}),e.jsx("div",{className:"space-y-2",children:s.items?.map(c=>e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-900",children:c.sheet_title}),e.jsxs("span",{className:"text-gray-600",children:[c.price.toLocaleString(),"원"]})]},c.id))}),e.jsxs("div",{className:"flex justify-between items-center mt-3 pt-3 border-t border-gray-200",children:[e.jsxs("span",{className:"font-medium text-gray-900",children:["총 ",s.total_amount.toLocaleString(),"원"]}),e.jsx(l,{to:`/my-orders/${s.id}`,className:"text-blue-600 hover:text-blue-700 text-sm",children:"상세보기"})]})]},s.id))})]}),t==="downloads"&&e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-6",children:"다운로드 가능한 악보"}),downloadableSheets.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("i",{className:"ri-download-line text-gray-300 w-16 h-16 mx-auto mb-4"}),e.jsx("h4",{className:"text-lg font-medium text-gray-900 mb-2",children:"다운로드 가능한 악보가 없습니다"}),e.jsx("p",{className:"text-gray-600",children:"구매한 악보가 여기에 표시됩니다."})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:downloadableSheets.map(s=>e.jsx("div",{className:"border border-gray-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start space-x-4",children:[e.jsx("img",{src:s.thumbnail_url||`https://readdy.ai/api/search-image?query=drum%20sheet%20music%20$%7Bsheet.title%7D%20modern%20minimalist%20background&width=80&height=60&seq=${s.id}&orientation=landscape`,alt:s.title,className:"w-16 h-12 object-cover object-top rounded"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h4",{className:"font-medium text-gray-900 truncate",children:s.title}),e.jsxs("p",{className:"text-sm text-gray-600",children:["구매일: ",new Date(s.purchase_date).toLocaleDateString()]}),e.jsxs("div",{className:"flex items-center space-x-2 mt-2",children:[e.jsxs("button",{onClick:()=>downloadSheet(s),className:"bg-blue-600 text-white px-3 py-1 rounded text-sm hover:bg-blue-700 transition-colors flex items-center space-x-1 whitespace-nowrap",children:[e.jsx("i",{className:"ri-download-line w-4 h-4"}),e.jsx("span",{children:"다운로드"})]}),e.jsxs("button",{onClick:()=>viewSheet(s),className:"bg-gray-100 text-gray-700 px-3 py-1 rounded text-sm hover-bg-gray-200 transition-colors flex items-center space-x-1 whitespace-nowrap",children:[e.jsx("i",{className:"ri-eye-line w-4 h-4"}),e.jsx("span",{children:"미리보기"})]})]})]})]})},s.id))})]}),t==="favorites"&&e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-6",children:"찜한 악보"}),favorites.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("i",{className:"ri-heart-line text-gray-300 w-16 h-16 mx-auto mb-4"}),e.jsx("h4",{className:"text-lg font-medium text-gray-900 mb-2",children:"찜한 악보가 없습니다"}),e.jsx("p",{className:"text-gray-600",children:"마음에 드는 악보를 찜해보세요."})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:favorites.map(s=>e.jsx("div",{className:"border border-gray-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start space-x-4",children:[e.jsx("img",{src:s.thumbnail_url||`https://readdy.ai/api/search-image?query=drum%20sheet%20music%20$%7Bsheet.title%7D%20modern%20minimalist%20background&width=80&height=60&seq=${s.id}&orientation=landscape`,alt:s.title,className:"w-16 h-12 object-cover object-top rounded"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h4",{className:"font-medium text-gray-900 truncate",children:s.title}),e.jsx("p",{className:"text-sm text-gray-600 truncate",children:s.description}),e.jsxs("p",{className:"text-lg font-bold text-blue-600 mt-1",children:[s.price.toLocaleString(),"원"]}),e.jsxs("div",{className:"flex items-center space-x-2 mt-2",children:[e.jsx(l,{to:`/sheet-detail/${s.id}`,className:"bg-blue-600 text-white px-3 py-1 rounded text-sm hover:bg-blue-700 transition-colors whitespace-nowrap",children:"상세보기"}),e.jsxs("button",{onClick:()=>removeFavorite(s.id),className:"bg-red-100 text-red-600 px-3 py-1 rounded text-sm hover:bg-red-200 transition-colors flex items-center space-x-1 whitespace-nowrap",children:[e.jsx("i",{className:"ri-delete-bin-line w-4 h-4"}),e.jsx("span",{children:"삭제"})]})]})]})]})},s.id))})]}),t==="points"&&e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-6",children:"적립금 관리"}),e.jsx("div",{className:"bg-blue-50 rounded-lg p-6 mb-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold text-blue-900",children:"보유 적립금"}),e.jsx("p",{className:"text-sm text-blue-700",children:"다음 구매 시 사용 가능합니다"})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("span",{className:"text-3xl font-bold text-blue-600",children:userPoints.toLocaleString()}),e.jsx("span",{className:"text-blue-600 ml-1",children:"원"})]})]})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-4",children:"적립금 내역"}),pointHistory.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("i",{className:"ri-coin-line text-gray-300 w-12 h-12 mx-auto mb-3"}),e.jsx("p",{className:"text-gray-600",children:"적립금 내역이 없습니다."})]}):e.jsx("div",{className:"space-y-3",children:pointHistory.map(s=>e.jsxs("div",{className:"flex justify-between items-center py-3 border-b border-gray-100",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:s.description}),e.jsx("p",{className:"text-sm text-gray-600",children:new Date(s.created_at).toLocaleDateString()})]}),e.jsxs("span",{className:`font-medium ${s.amount>0?"text-green-600":"text-red-600"}`,children:[s.amount>0?"+":"",s.amount.toLocaleString(),"원"]})]},s.id))})]})]})]})]})})]})};export{$ as default};
//# sourceMappingURL=page-CGrUr7mz.js.map
