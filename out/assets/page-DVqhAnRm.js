import{r as l,j as e}from"./index-C3--GnAp.js";import{s as m}from"./supabase-KAXpo3yM.js";import{u as x}from"./authStore-Cz-qJVyn.js";const o={pending:"신청완료",quoted:"견적발송",paid:"입금확인",completed:"제작완료",cancelled:"취소됨"},h={pending:"bg-blue-100 text-blue-800",quoted:"bg-yellow-100 text-yellow-800",paid:"bg-green-100 text-green-800",completed:"bg-purple-100 text-purple-800",cancelled:"bg-red-100 text-red-800"};function j(){const[a,i]=l.useState([]),[n,c]=l.useState(!0),{user:t}=x();l.useEffect(()=>{t&&d()},[t]);const d=async()=>{try{const{data:s,error:r}=await m.from("custom_orders").select("*").order("created_at",{ascending:!1});if(r)throw r;i(s||[])}catch(s){console.error("Error fetching orders:",s)}finally{c(!1)}};return t?n?e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-600"})}):e.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:e.jsxs("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"주문제작 신청내역"}),e.jsx("p",{className:"mt-2 text-gray-600",children:"신청하신 주문제작의 진행상황을 확인하세요."})]}),a.length===0?e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-8 text-center",children:[e.jsx("div",{className:"w-16 h-16 mx-auto mb-4 flex items-center justify-center bg-gray-100 rounded-full",children:e.jsx("i",{className:"ri-file-list-3-line text-2xl text-gray-400"})}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"신청내역이 없습니다"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"아직 주문제작을 신청하지 않으셨습니다."}),e.jsxs("a",{href:"/custom-order",className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[e.jsx("i",{className:"ri-add-line mr-2"}),"주문제작 신청하기"]})]}):e.jsx("div",{className:"space-y-6",children:a.map(s=>e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:s.song_title}),s.artist&&e.jsx("p",{className:"text-gray-600",children:s.artist})]}),e.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${h[s.status]}`,children:o[s.status]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"신청일"}),e.jsx("p",{className:"font-medium",children:new Date(s.created_at).toLocaleDateString("ko-KR")})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"신청자"}),e.jsx("p",{className:"font-medium",children:s.name})]})]}),s.requirements&&e.jsxs("div",{className:"mb-4",children:[e.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"요청사항"}),e.jsx("p",{className:"text-gray-700 bg-gray-50 p-3 rounded-lg",children:s.requirements})]}),s.song_url&&e.jsxs("div",{className:"mb-4",children:[e.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"참고 URL"}),e.jsx("a",{href:s.song_url,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800 underline break-all",children:s.song_url})]}),s.admin_reply&&e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-600 rounded-full flex items-center justify-center mr-3 mt-1",children:e.jsx("i",{className:"ri-admin-line text-white text-sm"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h4",{className:"font-semibold text-blue-900",children:"관리자 답변"}),s.quoted_price&&e.jsxs("span",{className:"text-lg font-bold text-blue-600",children:[s.quoted_price.toLocaleString(),"원"]})]}),e.jsx("p",{className:"text-blue-800 whitespace-pre-wrap",children:s.admin_reply}),e.jsx("p",{className:"text-xs text-blue-600 mt-2",children:new Date(s.updated_at).toLocaleString("ko-KR")})]})]})}),s.status==="quoted"&&e.jsx("div",{className:"mt-4 p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("i",{className:"ri-information-line text-yellow-600 mr-2"}),e.jsx("p",{className:"text-yellow-800 text-sm",children:"견적을 확인하시고 입금해주시면 제작을 시작합니다. 입금 후 고객센터로 연락주세요."})]})})]})},s.id))})]})}):e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"로그인이 필요합니다"}),e.jsx("p",{className:"text-gray-600",children:"주문제작 신청내역을 확인하려면 로그인해주세요."})]})})}export{j as default};
//# sourceMappingURL=page-DVqhAnRm.js.map
