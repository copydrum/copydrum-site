{"version":3,"file":"page-DVqhAnRm.js","sources":["../../src/pages/my-orders/page.tsx"],"sourcesContent":["\nimport { useState, useEffect } from 'react';\nimport { supabase } from '../../lib/supabase';\nimport { useAuthStore } from '../../stores/authStore';\n\ninterface CustomOrder {\n  id: string;\n  name: string;\n  email: string;\n  phone: string;\n  song_title: string;\n  artist: string;\n  song_url: string;\n  requirements: string;\n  status: 'pending' | 'quoted' | 'paid' | 'completed' | 'cancelled';\n  admin_reply: string;\n  quoted_price: number;\n  created_at: string;\n  updated_at: string;\n}\n\nconst statusLabels = {\n  pending: '신청완료',\n  quoted: '견적발송',\n  paid: '입금확인',\n  completed: '제작완료',\n  cancelled: '취소됨'\n};\n\nconst statusColors = {\n  pending: 'bg-blue-100 text-blue-800',\n  quoted: 'bg-yellow-100 text-yellow-800',\n  paid: 'bg-green-100 text-green-800',\n  completed: 'bg-purple-100 text-purple-800',\n  cancelled: 'bg-red-100 text-red-800'\n};\n\nexport default function MyOrdersPage() {\n  const [orders, setOrders] = useState<CustomOrder[]>([]);\n  const [loading, setLoading] = useState(true);\n  const { user } = useAuthStore();\n\n  useEffect(() => {\n    if (user) {\n      fetchOrders();\n    }\n  }, [user]);\n\n  const fetchOrders = async () => {\n    try {\n      const { data, error } = await supabase\n        .from('custom_orders')\n        .select('*')\n        .order('created_at', { ascending: false });\n\n      if (error) throw error;\n      setOrders(data || []);\n    } catch (error) {\n      console.error('Error fetching orders:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  if (!user) {\n    return (\n      <div className=\"min-h-screen bg-gray-50 flex items-center justify-center\">\n        <div className=\"text-center\">\n          <h2 className=\"text-2xl font-bold text-gray-900 mb-4\">로그인이 필요합니다</h2>\n          <p className=\"text-gray-600\">주문제작 신청내역을 확인하려면 로그인해주세요.</p>\n        </div>\n      </div>\n    );\n  }\n\n  if (loading) {\n    return (\n      <div className=\"min-h-screen bg-gray-50 flex items-center justify-center\">\n        <div className=\"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-600\"></div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-gray-50 py-8\">\n      <div className=\"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8\">\n        <div className=\"mb-8\">\n          <h1 className=\"text-3xl font-bold text-gray-900\">주문제작 신청내역</h1>\n          <p className=\"mt-2 text-gray-600\">신청하신 주문제작의 진행상황을 확인하세요.</p>\n        </div>\n\n        {orders.length === 0 ? (\n          <div className=\"bg-white rounded-lg shadow-sm p-8 text-center\">\n            <div className=\"w-16 h-16 mx-auto mb-4 flex items-center justify-center bg-gray-100 rounded-full\">\n              <i className=\"ri-file-list-3-line text-2xl text-gray-400\"></i>\n            </div>\n            <h3 className=\"text-lg font-medium text-gray-900 mb-2\">신청내역이 없습니다</h3>\n            <p className=\"text-gray-600 mb-6\">아직 주문제작을 신청하지 않으셨습니다.</p>\n            <a\n              href=\"/custom-order\"\n              className=\"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors\"\n            >\n              <i className=\"ri-add-line mr-2\"></i>\n              주문제작 신청하기\n            </a>\n          </div>\n        ) : (\n          <div className=\"space-y-6\">\n            {orders.map((order) => (\n              <div key={order.id} className=\"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden\">\n                <div className=\"p-6\">\n                  <div className=\"flex items-start justify-between mb-4\">\n                    <div>\n                      <h3 className=\"text-lg font-semibold text-gray-900\">{order.song_title}</h3>\n                      {order.artist && (\n                        <p className=\"text-gray-600\">{order.artist}</p>\n                      )}\n                    </div>\n                    <span className={`px-3 py-1 rounded-full text-sm font-medium ${statusColors[order.status]}`}>\n                      {statusLabels[order.status]}\n                    </span>\n                  </div>\n\n                  <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4\">\n                    <div>\n                      <p className=\"text-sm text-gray-500\">신청일</p>\n                      <p className=\"font-medium\">{new Date(order.created_at).toLocaleDateString('ko-KR')}</p>\n                    </div>\n                    <div>\n                      <p className=\"text-sm text-gray-500\">신청자</p>\n                      <p className=\"font-medium\">{order.name}</p>\n                    </div>\n                  </div>\n\n                  {order.requirements && (\n                    <div className=\"mb-4\">\n                      <p className=\"text-sm text-gray-500 mb-1\">요청사항</p>\n                      <p className=\"text-gray-700 bg-gray-50 p-3 rounded-lg\">{order.requirements}</p>\n                    </div>\n                  )}\n\n                  {order.song_url && (\n                    <div className=\"mb-4\">\n                      <p className=\"text-sm text-gray-500 mb-1\">참고 URL</p>\n                      <a\n                        href={order.song_url}\n                        target=\"_blank\"\n                        rel=\"noopener noreferrer\"\n                        className=\"text-blue-600 hover:text-blue-800 underline break-all\"\n                      >\n                        {order.song_url}\n                      </a>\n                    </div>\n                  )}\n\n                  {order.admin_reply && (\n                    <div className=\"bg-blue-50 border border-blue-200 rounded-lg p-4\">\n                      <div className=\"flex items-start\">\n                        <div className=\"w-8 h-8 bg-blue-600 rounded-full flex items-center justify-center mr-3 mt-1\">\n                          <i className=\"ri-admin-line text-white text-sm\"></i>\n                        </div>\n                        <div className=\"flex-1\">\n                          <div className=\"flex items-center justify-between mb-2\">\n                            <h4 className=\"font-semibold text-blue-900\">관리자 답변</h4>\n                            {order.quoted_price && (\n                              <span className=\"text-lg font-bold text-blue-600\">\n                                {order.quoted_price.toLocaleString()}원\n                              </span>\n                            )}\n                          </div>\n                          <p className=\"text-blue-800 whitespace-pre-wrap\">{order.admin_reply}</p>\n                          <p className=\"text-xs text-blue-600 mt-2\">\n                            {new Date(order.updated_at).toLocaleString('ko-KR')}\n                          </p>\n                        </div>\n                      </div>\n                    </div>\n                  )}\n\n                  {order.status === 'quoted' && (\n                    <div className=\"mt-4 p-4 bg-yellow-50 border border-yellow-200 rounded-lg\">\n                      <div className=\"flex items-center\">\n                        <i className=\"ri-information-line text-yellow-600 mr-2\"></i>\n                        <p className=\"text-yellow-800 text-sm\">\n                          견적을 확인하시고 입금해주시면 제작을 시작합니다. \n                          입금 후 고객센터로 연락주세요.\n                        </p>\n                      </div>\n                    </div>\n                  )}\n                </div>\n              </div>\n            ))}\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n"],"names":["statusLabels","statusColors","MyOrdersPage","orders","setOrders","useState","loading","setLoading","user","useAuthStore","useEffect","fetchOrders","data","error","supabase","jsx","jsxs","order"],"mappings":"sIAqBA,MAAMA,EAAe,CACnB,QAAS,OACT,OAAQ,OACR,KAAM,OACN,UAAW,OACX,UAAW,KACb,EAEMC,EAAe,CACnB,QAAS,4BACT,OAAQ,gCACR,KAAM,8BACN,UAAW,gCACX,UAAW,yBACb,EAEA,SAAwBC,GAAe,CACrC,KAAM,CAACC,EAAQC,CAAS,EAAIC,EAAAA,SAAwB,CAAA,CAAE,EAChD,CAACC,EAASC,CAAU,EAAIF,EAAAA,SAAS,EAAI,EACrC,CAAE,KAAAG,CAAA,EAASC,EAAA,EAEjBC,EAAAA,UAAU,IAAM,CACVF,GACFG,EAAA,CAEJ,EAAG,CAACH,CAAI,CAAC,EAET,MAAMG,EAAc,SAAY,CAC9B,GAAI,CACF,KAAM,CAAE,KAAAC,EAAM,MAAAC,CAAA,EAAU,MAAMC,EAC3B,KAAK,eAAe,EACpB,OAAO,GAAG,EACV,MAAM,aAAc,CAAE,UAAW,GAAO,EAE3C,GAAID,EAAO,MAAMA,EACjBT,EAAUQ,GAAQ,EAAE,CACtB,OAASC,EAAO,CACd,QAAQ,MAAM,yBAA0BA,CAAK,CAC/C,QAAA,CACEN,EAAW,EAAK,CAClB,CACF,EAEA,OAAKC,EAWDF,EAEAS,MAAC,OAAI,UAAU,2DACb,eAAC,MAAA,CAAI,UAAU,iEAAiE,CAAA,CAClF,QAKD,MAAA,CAAI,UAAU,+BACb,SAAAC,EAAAA,KAAC,MAAA,CAAI,UAAU,yCACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,OACb,SAAA,CAAAD,EAAAA,IAAC,KAAA,CAAG,UAAU,mCAAmC,SAAA,YAAS,EAC1DA,EAAAA,IAAC,IAAA,CAAE,UAAU,qBAAqB,SAAA,yBAAA,CAAuB,CAAA,EAC3D,EAECZ,EAAO,SAAW,EACjBa,EAAAA,KAAC,MAAA,CAAI,UAAU,gDACb,SAAA,CAAAD,EAAAA,IAAC,OAAI,UAAU,mFACb,eAAC,IAAA,CAAE,UAAU,6CAA6C,CAAA,CAC5D,EACAA,EAAAA,IAAC,KAAA,CAAG,UAAU,yCAAyC,SAAA,aAAU,EACjEA,EAAAA,IAAC,IAAA,CAAE,UAAU,qBAAqB,SAAA,wBAAqB,EACvDC,EAAAA,KAAC,IAAA,CACC,KAAK,gBACL,UAAU,2GAEV,SAAA,CAAAD,EAAAA,IAAC,IAAA,CAAE,UAAU,kBAAA,CAAmB,EAAI,WAAA,CAAA,CAAA,CAEtC,EACF,EAEAA,MAAC,MAAA,CAAI,UAAU,YACZ,WAAO,IAAKE,GACXF,EAAAA,IAAC,OAAmB,UAAU,uEAC5B,SAAAC,OAAC,MAAA,CAAI,UAAU,MACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,wCACb,SAAA,CAAAA,OAAC,MAAA,CACC,SAAA,CAAAD,EAAAA,IAAC,KAAA,CAAG,UAAU,sCAAuC,SAAAE,EAAM,WAAW,EACrEA,EAAM,QACLF,EAAAA,IAAC,KAAE,UAAU,gBAAiB,WAAM,MAAA,CAAO,CAAA,EAE/C,EACAA,EAAAA,IAAC,OAAA,CAAK,UAAW,8CAA8Cd,EAAagB,EAAM,MAAM,CAAC,GACtF,SAAAjB,EAAaiB,EAAM,MAAM,CAAA,CAC5B,CAAA,EACF,EAEAD,EAAAA,KAAC,MAAA,CAAI,UAAU,6CACb,SAAA,CAAAA,OAAC,MAAA,CACC,SAAA,CAAAD,EAAAA,IAAC,IAAA,CAAE,UAAU,wBAAwB,SAAA,MAAG,EACxCA,EAAAA,IAAC,IAAA,CAAE,UAAU,cAAe,SAAA,IAAI,KAAKE,EAAM,UAAU,EAAE,mBAAmB,OAAO,CAAA,CAAE,CAAA,EACrF,SACC,MAAA,CACC,SAAA,CAAAF,EAAAA,IAAC,IAAA,CAAE,UAAU,wBAAwB,SAAA,MAAG,EACxCA,EAAAA,IAAC,IAAA,CAAE,UAAU,cAAe,WAAM,IAAA,CAAK,CAAA,CAAA,CACzC,CAAA,EACF,EAECE,EAAM,cACLD,OAAC,MAAA,CAAI,UAAU,OACb,SAAA,CAAAD,EAAAA,IAAC,IAAA,CAAE,UAAU,6BAA6B,SAAA,OAAI,EAC9CA,EAAAA,IAAC,IAAA,CAAE,UAAU,0CAA2C,WAAM,YAAA,CAAa,CAAA,EAC7E,EAGDE,EAAM,UACLD,OAAC,MAAA,CAAI,UAAU,OACb,SAAA,CAAAD,EAAAA,IAAC,IAAA,CAAE,UAAU,6BAA6B,SAAA,SAAM,EAChDA,EAAAA,IAAC,IAAA,CACC,KAAME,EAAM,SACZ,OAAO,SACP,IAAI,sBACJ,UAAU,wDAET,SAAAA,EAAM,QAAA,CAAA,CACT,EACF,EAGDA,EAAM,aACLF,EAAAA,IAAC,MAAA,CAAI,UAAU,mDACb,SAAAC,EAAAA,KAAC,MAAA,CAAI,UAAU,mBACb,SAAA,CAAAD,EAAAA,IAAC,OAAI,UAAU,8EACb,eAAC,IAAA,CAAE,UAAU,mCAAmC,CAAA,CAClD,EACAC,EAAAA,KAAC,MAAA,CAAI,UAAU,SACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,yCACb,SAAA,CAAAD,EAAAA,IAAC,KAAA,CAAG,UAAU,8BAA8B,SAAA,SAAM,EACjDE,EAAM,cACLD,OAAC,OAAA,CAAK,UAAU,kCACb,SAAA,CAAAC,EAAM,aAAa,eAAA,EAAiB,GAAA,CAAA,CACvC,CAAA,EAEJ,EACAF,EAAAA,IAAC,IAAA,CAAE,UAAU,oCAAqC,WAAM,YAAY,EACpEA,EAAAA,IAAC,IAAA,CAAE,UAAU,6BACV,SAAA,IAAI,KAAKE,EAAM,UAAU,EAAE,eAAe,OAAO,CAAA,CACpD,CAAA,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CACF,EAGDA,EAAM,SAAW,UAChBF,EAAAA,IAAC,MAAA,CAAI,UAAU,4DACb,SAAAC,EAAAA,KAAC,MAAA,CAAI,UAAU,oBACb,SAAA,CAAAD,EAAAA,IAAC,IAAA,CAAE,UAAU,0CAAA,CAA2C,EACxDA,EAAAA,IAAC,IAAA,CAAE,UAAU,0BAA0B,SAAA,+CAAA,CAGvC,CAAA,CAAA,CACF,CAAA,CACF,CAAA,CAAA,CAEJ,CAAA,EAjFQE,EAAM,EAkFhB,CACD,CAAA,CACH,CAAA,CAAA,CAEJ,CAAA,CACF,QAlIG,MAAA,CAAI,UAAU,2DACb,SAAAD,EAAAA,KAAC,MAAA,CAAI,UAAU,cACb,SAAA,CAAAD,EAAAA,IAAC,KAAA,CAAG,UAAU,wCAAwC,SAAA,aAAU,EAChEA,EAAAA,IAAC,IAAA,CAAE,UAAU,gBAAgB,SAAA,2BAAA,CAAyB,CAAA,CAAA,CACxD,CAAA,CACF,CA+HN"}